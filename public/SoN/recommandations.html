<html>

<head>

	<title> SoN </title>
	<meta charset="UTF-8">
	<link rel="stylesheet"  href="css/styleSheet.css">


</head>

<body>

	<nav>
		<ul>
			<li><a href="index.html">Home</a></li>
			<li><a href="login.html">LogIn</a></li>
			<li><a href="recommandations.html">Recommandations</a></li>
			<li><a href="search.html">Search</a></li>
			<li><a href="graph.html">Graph</a></li>
		</ul>
	</nav>

	<main class="center">
		<ul class="recommandations">
		</ul>
	</main>
	<script src="javascript/recommandations.js"></script>

	<script>
		var obiecte = []
		xhttp = new XMLHttpRequest();

		xhttp.onprogress = function (evt) {
			if (this.response == "Not enough log ins") {
				const container = document.getElementsByClassName("recommandations")[0];
				var liEl = document.createElement("li");
				var resp = document.createElement("P");
				resp.innerText = "Not enough logins";

				liEl.appendChild(resp);
				container.appendChild(liEl);
			} else {
				if (this.response == "no changes") {
					obiecte = JSON.parse(window.localStorage.getItem("listOfRecommandation"))
					obiecte.forEach(el => {
						showResponseFromTwitter(el)
					});
				} else {
					let resp = this.response.split("}")
					resp.forEach(el => {
						if (!obiecte.includes((el + "}")) && el != "") {
							showResponseFromTwitter(el + "}");
							obiecte.push((el + "}"));
						}

					});
					window.localStorage.setItem("listOfRecommandation", JSON.stringify(obiecte))

				}

			}

			//console.log(this.response)
			//showResponseFromTwitter(this.response);
		}
		xhttp.open("POST", "https://localhost:3000/index.html", true);
		xhttp.setRequestHeader("Why", "Recommend");
		xhttp.send();

	</script>
</body>

</html>
