<html>

<head>

	<title> SoN </title>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="css/styleSheet.css">
	<link rel="icon" href="images/logoMic.png">

</head>

<body>

	<nav>
		<ul>
			<li><a href="index.html">Home</a></li>
			<li><a href="login.html">LogIn</a></li>
			<li><a href="recommandations.html">Recommandations</a></li>
			<li><a href="search.html">Search</a></li>
			<li><a href="graph.html">Graph</a></li>
		</ul>
	</nav>


	<script src="javascript/login.js"></script>

	<main>
		<ul class="login">
			<li id="githubLogIn">
				<ul>
					<li>
						<h6 style="color:#404448;">Github</h6>
					</li>
					<li>
						<form method="post" onsubmit="return false;">
							<input type="submit" value="LogIn" onclick="githubLogIn();">
						</form>
					</li>
				</ul>
			</li>


			<li id="lastfmLogIn">
				<ul>
					<li>
						<h6 style="color:#b90000;">Last.fm</h6>
					</li>
					<li>
						<form method="post" onsubmit="return false;">
							<input type="text" name="lastfmUsername" placeholder="Username" id="lastfmUsername"
								required="required">
							<input type="submit" value="Remember" onclick="lastfmIn();">
						</form>
					</li>
				</ul>
			</li>

			<li id="TwitterLogIn">
				<ul>
					<li>
						<h6 style="color:#55acee;">Twitter</h6>
					</li>
					<li>
						<form method="post" onsubmit="return false;">
							<input type="submit" value="LogIn" onclick="TwitterLogIn();">
						</form>
					</li>
				</ul>
			</li>

			<li id="LogOutAll">
				<ul>
					<li>
						<form method="post" onsubmit="return false;">
							<input type="submit" value="Log Out All" onclick="LogOutAll();">
						</form>
					</li>
				</ul>
			</li>
		</ul>

		<p>More sites are to be supported in the future</p>
	</main>
	<script>
		function getCookie(name) {
			var re = new RegExp(name + "=([^;]+)");
			var value = re.exec(document.cookie);
			return (value != null) ? unescape(value[1]) : null;
		}
		var cookies = document.cookie;
		if (cookies.includes("TwitterLogIn=true")) {
			var LoggedElement = document.createElement("p")
			var LogOutButton = document.createElement("button")
			LoggedElement.setAttribute("style", "color:#55acee;")
			LogOutButton.setAttribute("type", "button");
			LogOutButton.setAttribute("value", "LogOut");
			LogOutButton.innerText = "LogOut";
			LogOutButton.setAttribute("onclick", "TwitterLogOut();");
			LoggedElement.innerText = "Already logged with Twitter as " + getCookie("twitterUsername");
			TwitterLiElement = document.getElementById("TwitterLogIn");
			TwitterLiElement.innerHTML = ""
			TwitterLiElement.appendChild(LoggedElement)
			TwitterLiElement.appendChild(LogOutButton)
		}


		if (cookies.includes("lastfmLogged=true")) {
			var LoggedElement = document.createElement("p")
			LoggedElement.setAttribute("style", "color:#b90000;")
			var LogOutButton = document.createElement("button")
			LogOutButton.setAttribute("type", "button");
			LogOutButton.setAttribute("value", "LogOut");
			LogOutButton.innerText = "LogOut";
			LogOutButton.setAttribute("onclick", "lastfmOut();");
			LoggedElement.innerText = "Already logged with Lasfm as " + getCookie("lastfmUsername");
			TwitterLiElement = document.getElementById("lastfmLogIn");
			TwitterLiElement.innerHTML = ""
			TwitterLiElement.appendChild(LoggedElement)
			TwitterLiElement.appendChild(LogOutButton)
		}

		if (cookies.includes("GithubLogIn=true")) {
			var LoggedElement = document.createElement("p")
			var LogOutButton = document.createElement("button")
			LoggedElement.setAttribute("style", "color:#404448;")
			LogOutButton.setAttribute("type", "button");
			LogOutButton.setAttribute("value", "LogOut");
			LogOutButton.innerText = "LogOut";
			LogOutButton.setAttribute("onclick", "githubLogOut();");
			LoggedElement.innerText = "Already logged with Github as " + getCookie("githubUsername");
			TwitterLiElement = document.getElementById("githubLogIn");
			TwitterLiElement.innerHTML = ""
			TwitterLiElement.appendChild(LoggedElement)
			TwitterLiElement.appendChild(LogOutButton)
		}

		console.log(cookies);

	</script>

</body>

</html>
